<!--

  begin store page list all category redirect
  
  License       : < https://tinyurl.com/s872fb68 >
  
  Version       : 0.3.1
  
  SS Version    : 7.1
  
  Products V2
  Compatible    : Yes
  
  Fluid
  Engine
  Compatible    : Yes
  
  Note          : the code is comprised of two script tags. both are needed for
                  the effect to work
                
                  this effect is not active in the SS editor. to test it use
                  private browsing < https://tinyurl.com/ynessvsf >
  
  By            : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  -->
  
  <script>
  
    // initialize twc global if needed
    
    if ( window.twc == undefined ) window.twc = { };
    
    twc.splacr = {
    
      /*
      
        callback is a custom function that is called to supply a redirect URL to
        this code
        
        your callback must return a URL
        
        */
        
      callback : '[ enter your callback name here replacing square brackets ]'
      
      };
      
    </script>
    
  <!-- do not change anything below, there be the borg here -->
  
  <script>
  
    ( ( ) => {
    
      const version = '0.3.1';
      
      const s = `Store Page List All Category Redirect v${ version }, ` +
      
        'License < https://tinyurl.com/s872fb68 >, ' + 
        
        'Tom\'s Web Consulting < http://www.tomsWeb.consulting >';
        
      console.log ( s );
      
      if ( window.frameElement !== null ) return; // bail if editor
      
      const isStorePage = Static
      
        .SQUARESPACE_CONTEXT
        
        .collection
        
        .type
        
        ==
        
        13;
        
      if ( ! isStorePage ) return; // bail if not store page
      
      const isAll = Static
      
        .SQUARESPACE_CONTEXT
        
        .collection
        
        .fullUrl
        
        ==
        
        location
        
          .pathname;
          
      if ( ! isAll ) return; // bail if not all
      
      const codeKey = 'twc-splacr';
      
      try {
      
        const callback = window [
        
          twc
          
            .spar
            
            .callback
            
          ];
          
        const url = callback ( );
        
        if ( url === undefined ) return; // bail if no url
        
        location = url;
        
        } catch ( error ) {
        
          const s = `${ codeKey } callback error`;
          
          console.error ( s, error );
          
          }
          
      } ) ( );
      
    </script>
    
  <!-- end store page list all category redirect -->
