<!-- begin TWC Store Page Tag Date Hide -->

  <!--
  
    store page list tag date hide
    
    License       : < https://tinyurl.com/s872fb68 >
    
    Version       : 0.2.0
    
    SS Version    : 7.1
    
    Fluid
    Engine
    Compatible    : Not Applicable
    
    Note          : the code is comprised of a style and script tag. both are
                    needed for the full effect to work
                    
                    this effect is not active in SS Preview to test it use
                    private browsing < https://tinyurl.com/ynessvsf >
    
    Copyright     : 2024-2025 Thomas Creedon
                    
                    Tom's Web Consulting < http://www.tomsWeb.consulting/ >
    
    no user serviceable parts below
    
    -->
    
  <style>
  
    .product-list .product-list-item.twc-spltdh {
    
      display : none;
      
      }
      
    </style>
    
  <script>
  
    ( ( ) => {
    
      const
      
        version = '0.2.0',
        
        s = `Store Page Tag Date Hide v${ version }
        
          License < https://tinyurl.com/s872fb68 >
          
          Â© 2024-2025 Thomas Creedon
          
          Tom's Web Consulting < http://www.tomsWeb.consulting >`
          
          .replace ( /^\s+/gm, '' );
          
      console.log ( s );
      
      if ( window.frameElement !== null ) return; // bail if in preview
      
      const isStorePage = Static
      
        .SQUARESPACE_CONTEXT
        
        .collection
        
        .type
        
        ===
        
        13;
        
      if ( ! isStorePage ) return; // bail if not store page
      
      const callback = ( ) => {
      
        const isList = ( ( ) => {
        
          const
          
            selector = 'body[ id^="collection-" ]',
            
            is = document
            
              .querySelector ( selector )
              
              !==
              
              null;
              
          return is;
          
          } ) ( );
          
        if ( ! isList ) return; // bail if not list
        
        const
        
          callback = ( element ) => {
          
            const
            
              callback = ( className ) => {
              
                const inRange = ( x, min, max ) => {
                
                  const b = ( x - min ) * ( x - max ) <= 0;
                  
                  return b;
                  
                  };
                  
                let re = `tag-${ codeKey }-(\\d{4}-\\d{2}-\\d{2})` +
                
                  '(?:-(\\d{4}-\\d{2}-\\d{2}))?';
                  
                re = new RegExp ( re );
                
                const data = className
                
                  .match ( re );
                  
                // continue if tag doesn't match format
                
                if ( ! data ) return;
                
                let
                
                  d1 = data [ 1 ] + ' 00:00:00',
                  
                  d2 = data [ 2 ];
                  
                // d1
                
                {
                
                  d1 = new Date ( d1 );
                  
                  let b = isNaN ( d1 );
                  
                  if ( b ) return; // continue
                  
                  let year = d1.getFullYear ( );
                  
                  b = year === 1970;
                  
                  if ( b )
                  
                    d1.setYear ( dYear );
                    
                  }
                  
                // d2
                
                {
                
                  if ( ! d2 )
                  
                    d2 = '275760-09-12';
                    
                  d2 += ' 00:00:00';
                  
                  d2 = new Date ( d2 );
                  
                  b = isNaN ( d2 );
                  
                  if ( b ) return; // continue
                  
                  year = d2.getYear ( );
                  
                  b = year === 1970;
                  
                  if ( b )
                  
                    d2.setYear ( dYear );
                    
                  }
                  
                hide ||= inRange ( d, d1, d2 );
                
                },
                
              tags = element
              
                .getAttribute ( 'class' )
                
                .split ( ' ' )
                
                .filter ( t => t.startsWith ( `tag-${ codeKey }-` ) )
                
                .sort ( );
                
            let hide = false;
            
            tags.forEach ( callback ); // run through the tags
            
            if ( hide )
            
              element
              
                .classList
                
                .add ( codeKey );
                
            },
            
          codeKey = 'twc-spltdh',
          
          d = new Date ( ),
          
          dYear = d.getFullYear ( ),
          
          selector = '.product-list .product-list-item[ ' +
        
          `class*="tag-${ codeKey }-" ]`;
          
        document
        
          .body
          
          .querySelectorAll ( selector )
          
          .forEach ( callback );
          
        };
        
      document
      
        .addEventListener ( 'DOMContentLoaded', callback );
        
      } ) ( );
      
    </script>
    
  <!-- end TWC Store Page Tag Date Hide -->
