/*!

  store page list categories mega
  
  License           : < https://tinyurl.com/s872fb68 >
  
  Version           : 0.6.0
  
  SS Version        : 7.1
  
  Products V2
  Compatible        : Yes
  
  Fluid
  Engine
  Compatible        : Not Applicable
  
  Dependencies      : page categories to module
                      
                      < https://tinyurl.com/yc8cp3bn >
  
  Notes             : this code is not active when Categories Style is set to
                      DROPDOWN
                      
                      in the editor when you change the Menu Placement
                      (SIDE/TOP) you will see Squarespace's default style of
                      categories until you save the Store Page. if for some
                      reason the categories don't update after saving the
                      Store Page, refresh the Store Page
  
  Copyright         : 2023-2026 Thomas Creedon
                      
                      Tom's Web Consulting < http://www.tomsWeb.consulting/ >
  
  no user serviceable parts below
  
  */
(()=>{const e="0.6.0",t=`\n    \n      Store Page List Categories Mega v${e}\n      \n      License < https://tinyurl.com/s872fb68 >\n      \n      Â© 2023-2026 Thomas Creedon\n      \n      Tom's Web Consulting < http://www.tomsWeb.consulting >\n      \n      `.replace(/^ +/gm,"");console.log(t);const n=13===Static.SQUARESPACE_CONTEXT.collection?.type;if(!n)return;const c=!Static.SQUARESPACE_CONTEXT.item?.id;if(!c)return;window.twc=window.twc||{},twc.pctm=twc.pctm||{};const r=twc.pctm[Static.SQUARESPACE_CONTEXT.collection.id];if(!r)return;twc.splcc=twc.splcc||{};const o=()=>{const e=!!document.body.querySelector('.product-list[ data-category-interface-type = "subnav" ]');if(!e)return;const t="twc-splcm",n=".product-list";twc.data=twc.data||{},twc.data.hideShow=twc.data.hideShow||{},void 0===twc.data.hideShow[n]&&(twc.data.hideShow[n]=[]),twc.data.hideShow[n].push(`--${t}`);{const e=e=>{const t=Object.create(null),n=[];return e.forEach(e=>t[e.id]={...e,children:[]}),e.forEach(e=>{e.parentCategoryId?t[e.parentCategoryId].children.push(t[e.id]):n.push(t[e.id])}),n},n=()=>{const e=location.pathname.replace(d,"");return e},c=(e,t)=>{const n=[];let c=e.parentElement;for(;c;)t&&!c.matches(t)||n.push(c),c=c.parentElement;return n},o=t.split("-").reduce((e,t)=>e?.[t],window),a=(e,t)=>{const n=e=>{const n=e.children.length;let c,r=document.createElement("template");if(r.innerHTML=`\n            \n              <li class="children nested-category-breadcrumb-list-item">\n              \n                <a class="nested-category-breadcrumb-link" href="${d}${e.fullSlug}">\n                \n                  ${e.displayName}\n                  \n                  </a>\n                  \n                <span class="breadcrumb-separator" aria-hidden="true">\n                \n                  |\n                  \n                  </span>\n                  \n                </li>\n                \n              `,r=r.content.firstElementChild,n?(c=l(r.querySelector(".nested-category-breadcrumb-link"),"\n                \n                  <details open>\n                  \n                    <summary>\n                    \n                      </summary>\n                      \n                      </details>\n                      \n                  "),o.categoriesExpandedOnLoad||c.removeAttribute("open")):(r.classList.remove("children"),c=r),t.append(r),!n)return;const i=document.createElement("ul");c.append(i),a(e.children,i)};e.forEach(n)},i=document.createElement("ul"),d=Static.SQUARESPACE_CONTEXT.collection.fullUrl,l=(document.documentElement.clientWidth,(e,t="<div>")=>{const n=e=>{let n,c;if("string"==typeof t){{const e=document.createElement("template");if(e.innerHTML=t.trim(),c=e.content.firstElementChild,!c)return}for(n=c;n.firstElementChild;)n=n.firstElementChild}else{if(!(t instanceof Element)){const e="Invalid wrapper type: must be HTML string or DOM element";throw new Error(e)}c=t.cloneNode(!1),n=c}e.parentNode&&e.parentNode.insertBefore(c,e),n.appendChild(e),r.push(c)},c="string"==typeof e?document.querySelectorAll(e):e instanceof NodeList?e:[e];let r=[];return c.forEach(n),r=1===r.length?r[0]:r,r}),s=n();let u,p;i.classList.add(t),o.hideIcon&&i.setAttribute(`data-${t}-hide-icon`,""),a(e(r),i),p=`[ href="${d}${s}" ]`,u=i.querySelector(p),u.classList.add("active"),c(u,"details").forEach(e=>e.setAttribute("open","")),document.body.querySelector([".nested-category-children",".nested-category-tree-wrapper"].join(", ")).after(i)}{twc.data.hideShow[n].pop(`--${t}`);const e=twc.data.hideShow[n].length,c=document.querySelector(".product-list");e||c.style.setProperty("--twc-product-list-visibility","visible")}};document.addEventListener("DOMContentLoaded",o)})();
