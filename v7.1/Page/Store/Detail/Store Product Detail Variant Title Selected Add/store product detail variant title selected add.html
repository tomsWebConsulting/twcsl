<!-- begin TWC Store Product Detail Variant Title Selected Add -->

  <!--
  
    begin store product detail variant title selected add
    
    License       : < https://tinyurl.com/s872fb68 >
    
    Version       : 0.2.0
    
    SS Version    : 7.1
    
    Products V2
    Compatible    : Yes
    
    Fluid
    Engine
    Compatible    : Not Applicable
    
    Note          : the code is comprised of a style and script tag. both are
                    needed for the full effect to work
    
    Copyright     : 2023-2025 Thomas Creedon
                    
                    Tom's Web Consulting < http://www.tomsWeb.consulting/ >
    
    no user serviceable parts below
    
    -->
    
  <style>
  
    .twc-spdvtsa {
    
      font-style : italic;
      
      }
      
    </style>
    
  <script>
  
    ( ( ) => {
    
      const
      
        title = 'Store Product Detail Variant Title Selected Add',
        
        version = '0.2.0',
        
        s = `
        
          ${ title } v${ version }
          
          Â© 2023-2025 Thomas Creedon
          
          Tom's Web Consulting < http://www.tomsWeb.consulting >
          
          `
          
          .replace ( /^\s+/gm, '' );
          
      console.log ( s );
      
      const isStorePage = Static
      
        .SQUARESPACE_CONTEXT
        
        .collection
        
        ?.type
        
        ===
        
        13;
        
      if ( ! isStorePage ) return; // bail if not store page
      
      const isDetail
      
        =
        
        !!
        
        Static
        
          .SQUARESPACE_CONTEXT
          
          .item;
          
      if ( ! isDetail ) return; // bail if not detail
      
      const callback = ( ) => {
      
        const
        
          codeKey = 'twc-spdvtsa',
          
          filterCallback = ( element ) => {
          
            const
            
              text = element
                
                .textContent
                
                .trim ( ),
                
              isMatch = options
              
                .variantOptions
                
                .some ( o => text.endsWith ( `${ o }:` ) );
                
            return isMatch;
            
            },
            
          forEachCallback = ( element ) => {
          
            const
            
              callback = ( event ) => {
              
                spanElement
                
                  .textContent
                  
                  =
                  
                  event
                  
                    .target
                    
                    .value;
                    
                },
                
              spanElement = document
              
                .createElement ( 'span' );
                
            spanElement
            
              .classList
              
              .add ( codeKey );
              
            element
            
              .append ( spanElement );
              
            element
            
              .parentElement
              
              .addEventListener (
              
                'change',
                
                callback
                
                );
                
            },
            
          options = codeKey
          
            .split ( '-' )
            
            .reduce ( ( obj, key ) => obj?.[ key ], window );
            
        [
        
          ...
          
          document
          
            .body
            
            .querySelectorAll ( '.variant-option-title' )
            
          ]
          
          .filter ( filterCallback )
          
          .forEach ( forEachCallback );
          
        };
        
      document
      
        .addEventListener ( 'DOMContentLoaded', callback );
        
      } ) ( );
      
    </script>
    
  <!-- end TWC Store Product Detail Variant Title Selected Add -->
