(()=>{
/*!
  
    page categories cache
    
    License         : < https://tinyurl.com/s872fb68 >
    
    Version         : 0.2.1
    
    SS Version      : 7.1
    
    Products V2
    Compatible      : Not Applicable
    
    Fluid
    Engine
    Compatible      : Not Applicable
    
    Notes           : the code makes a call to the json version of a page
                      for categories information that is not normally
                      available through other means
                      
                      the cache disable option doesn't disable the overall
                      cache logic. it simply removes the session storage key
                      after user callbacks are run. this causes the cache
                      data to be regenerated when the Store page is
                      reloaded. this can be useful for testing or if you
                      want site visitors to always have access to the
                      current categories
    
    Copyright       : 2026 Thomas Creedon
                      
                      Tom's Web Consulting
                      
                      < http://www.tomsWeb.consulting/ >
    
    no user serviceable parts below
    
    */
const e="0.2.1",t=`\n    \n      Page Categories Cache v${e}\n      \n      License < https://tinyurl.com/s872fb68 >\n      \n      Â© 2026 Thomas Creedon\n      \n      Tom's Web Consulting < http://www.tomsWeb.consulting >\n      \n      `.replace(/^\s+/gm,"");console.log(t);const c=!!document.querySelector(['body[ class*="collection-type-blog-" ]','body[ class~="collection-type-blog" ]'].join(", ")),o=!!document.querySelector(['body[ class*="collection-type-events-" ]','body[ class~="collection-type-events" ]'].join(", ")),n=13===Static.SQUARESPACE_CONTEXT.collection?.type,s=c||o||n;if(!s)return;window.twc=window.twc||{},twc.pcc=twc.pcc||{},twc.pcc.callbacks=twc.pcc.callbacks||[];const a=e=>{if(!e)return;const t="category-"+e.replaceAll(" ","-").toLowerCase().replace(/[^\w-]+/g,"").replaceAll("--","-");return t},l="twc-pcc",r=Static.SQUARESPACE_CONTEXT,i=l.split("-").reduce((e,t)=>e?.[t],window),w=r.collection.id,p=r.collection.fullUrl+"?format=json",m=e=>{i.callbacks.forEach(t=>{try{t(e)}catch(e){const t=`${l} callback error`;console.error(t,e)}})},d=async()=>{const e=i.callbacks.length;if(!e){const e=`${l} no callbacks`;return void console.warn(e)}let t=JSON.parse(sessionStorage.getItem(`${l}-${w}`));if(t)return m(t),void(i.cacheDisable&&sessionStorage.removeItem(`${l}-${w}`));try{const e=await fetch(p);if(!e.ok){const t=`\n          \n            ${l} network response was\n            \n            not ok ${e.statusText}\n            \n            `.trim().replace(/\s+/gm," ");throw new Error(t)}t=await e.json()}catch(e){const t=`\n          \n            ${l} there has been a\n            \n            problem with your fetch get\n            \n            operation, ${e}.\n            \n            `.trim().replace(/\s+/gm," ");console.error(t)}finally{{t=t.nestedCategories;const e=t.all;e.className=a(e.displayName),t.categories.forEach(e=>e.className=a(e.displayName))}sessionStorage.setItem(`${l}-${w}`,JSON.stringify(t)),m(t),i.cacheDisable&&sessionStorage.removeItem(`${l}-${w}`)}};document.addEventListener("DOMContentLoaded",d)})();
