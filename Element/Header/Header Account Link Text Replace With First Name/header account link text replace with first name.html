<script>

  ( ( ) => {
  
    /*
    
      header account link text replace with first name
      
      Version       : 0.2.0
      
      SS Versions   : 7.1, 7.0
      
      Fluid
      Engine
      Compatible    : Not Applicable
      
      Copyright     : 2025 Thomas Creedon
                      
                      Tom's Web Consulting < http://www.tomsWeb.consulting/ >
      
      no user serviceable parts below
      
      */
      
    const callback = ( ) => {
    
      const
      
        version = '0.2.0',
        
        s = `Header Account Link Text Replace With First Name v${ version }
        
          License < https://tinyurl.com/s872fb68 >
          
          Â© 2025 Thomas Creedon
          
          Tom's Web Consulting < http://www.tomsWeb.consulting >`
          
          .replace ( /^\s+/gm, '' );
          
      console.log ( s );
      
      const
      
        initialize = ( ) => {
        
          let selector = '.user-accounts-text-link span.auth';
          
          const elements = document
          
            .querySelectorAll  ( selector );
            
          if ( ! elements.length ) return; // bail if no elements
          
          const
          
            callback = ( element ) => {
            
              element
              
                .textContent
                
                =
                
                firstName;
                
              element
              
                .classList
                
                .add ( `${ codeKey }` );
                
              };
              
            codeKey = 'twc-haltrwfn',
            
            re = /^.*SiteUserInfo=/;
            
          let
          
            firstName = document
            
              .cookie
              
              .split ( ';' )
              
              .find ( e => re.test ( e ) )
              
              ?.split ( '=' )
              
              [ 1 ];
              
          firstName = decodeURIComponent ( firstName );
          
          if ( firstName === 'undefined' ) return; // bail if no first name
          
          firstName = JSON
          
            .parse ( firstName )
            
            .firstName;
            
          elements.forEach ( callback );
          
          },
          
        ssVersion = Static
        
          .SQUARESPACE_CONTEXT
          
          .templateVersion;
          
      switch ( ssVersion ) {
      
        case '7.1' :
        
          initialize ( );
          
          break;
          
        case '7' :
        
          Squarespace.onInitialize ( Y, initialize );
          
          break;
          
        }
        
      };
      
    document
    
      .addEventListener ( 'DOMContentLoaded', callback );
      
    } ) ( );
    
  </script>
