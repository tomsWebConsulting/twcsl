(()=>{
/*!
  
    form text field max length data
    
    License         : < https://tinyurl.com/s872fb68 >
    
    Version         : 0.1.0
    
    SS Versions     : 7.1, 7.0
    
    v7.1
    Products V2
    Compatible      : Yes
    
    v7.1
    Fluid
    Engine
    Compatible      : Yes
    
    Dependencies    : cart page observe changes
                      
                      < https://tinyurl.com/2tbppm2v >
    
    Notes           : this code is a base for other effects
                    
                      this code makes calls to the json version of products
                      for information that is not normally available
    
                      this code does not work on the checkout page. it is a
                      Squarespace security feature that no code can alter
                      the checkout page
    
    Copyright       : 2026 Thomas Creedon
                      
                      Tom's Web Consulting < http://www.tomsWeb.consulting/ >
    
    no user serviceable parts below
    
    */
const t="0.1.0",n=`\n    \n      Form Text Field Max Length Data v${t}\n      \n      License < https://tinyurl.com/s872fb68 >\n      \n      Â© 2026 Thomas Creedon\n      \n      Tom's Web Consulting < http://www.tomsWeb.consulting >\n      \n      `.replace(/^\s+/gm,"");console.log(n),window.twc=window.twc||{},twc.ftfmld=(t=>{const n={ids:[]};return Object.assign(t,n),t})(twc.ftfmld||{}),twc.cpoc=twc.cpoc||{},twc.cpoc.callbacks=twc.cpoc.callbacks||{},twc.cpoc.callbacks.added=(t=>{const n=async t=>{const n=1===t.nodeType;if(!n)return;const c="cart-container"===t.getAttribute("data-test");if(!c)return;const e=async t=>{try{const n=await Promise.all(t.map(async t=>{const n=await fetch(t);if(!n.ok){const t=`\n                    \n                      ${o} network response was not ok ${n.statusText}\n                      \n                      `.trim().replace(/\s+/gm," ");throw new Error(t)}return n.json()}));return n}catch(t){const n=`\n              \n                ${o} there has been a problem with your fetch batch operation,\n                \n                ${t}.\n                \n                `.trim().replace(/\s+/gm," ");return console.error(n),null}},s=[...t.querySelectorAll(".cart-row-title")].map(t=>`${t.getAttribute("href")}?format=json`),a=await e(s);a&&a.forEach(t=>{const n=t.item;r.ids.push(n.id),n.variants.forEach(t=>r.ids.push(t.sku))})};return t.push(n),t})(twc.cpoc.callbacks.added||[]);const o="twc-ftfmld",c=(t,n=[])=>{for(const o in t){const e=t[o],s=e&&"object"==typeof e,r="string"==typeof e;r?n.push(e):s&&c(e,n)}return n},e=async()=>{const t=!Static.SQUARESPACE_CONTEXT.item?.id,n=13===Static.SQUARESPACE_CONTEXT.collection?.type,c=n&&t;if(c)try{const t=Static.SQUARESPACE_CONTEXT.collection.fullUrl+"?format=json",n=await fetch(t);if(!n.ok){const t=`\n            \n              ${o} network response was not ok ${n.statusText}\n                  \n              `.trim().replace(/\s+/gm," ");throw new Error(t)}const c=t=>{r.ids.push(t.id),t.variants.forEach(t=>r.ids.push(t.sku))},e=await n.json();return void e.items.forEach(c)}catch(t){const n=`\n            \n              ${o} there has been a problem with your fetch get operation,\n              \n              ${t}.\n              \n              `.trim().replace(/\s+/gm," ");console.error(n)}const e=".sqs-add-to-cart-button-wrapper";document.body.querySelectorAll(e).forEach(s)},s=async t=>{const n={productBlock:"product-block",7.1:{pdp:"product-detail",pdpAddOn:"product-add-ons"},7:{pdp:"ProductItem-details"}},e=c(n).map(t=>`.${t}`).join(", ");t=t.closest(e);const s=t.classList,a=s.contains(n[7.1].pdp)||s.contains(n[7].pdp),i=s.contains(n[7.1].pdpAddOn),d=s.contains(n.productBlock);switch(!0){case a:r.ids.push(Static.SQUARESPACE_CONTEXT.itemId),Static.SQUARESPACE_CONTEXT.product.variants.forEach(t=>r.ids.push(t.sku));break;case i:try{const n=t.querySelector(".add-on-thumbnail-link").getAttribute("href")+"?format=json",c=await fetch(n);if(!c.ok){const t=`\n              \n                ${o} network response was not ok ${c.statusText}\n                    \n                `.trim().replace(/\s+/gm," ");throw new Error(t)}const e=await c.json(),s=e.item;r.ids.push(s.id),s.variants.forEach(t=>r.ids.push(t.sku))}catch(t){const n=`\n              \n                ${o} there has been a problem with your fetch get operation,\n                \n                ${t}.\n                \n                `.trim().replace(/\s+/gm," ");console.error(n)}break;case d:{const n=JSON.parse(t.getAttribute("data-product"));r.ids.push(n.id),n?.variants.forEach(t=>r.ids.push(t.sku));break}}},r=o.split("-").reduce((t,n)=>t?.[n],window);document.addEventListener("DOMContentLoaded",e)})();
