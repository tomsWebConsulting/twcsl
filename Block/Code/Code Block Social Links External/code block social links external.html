<!--

  begin code block social links external
  
  License         : < https://tinyurl.com/s872fb68 >
  
  Version         : 0.3.0
  
  SS Versions     : 7.1, 7.0
  
  v7.1
  Fluid
  Engine
  Compatible      : Yes
  
  v7.0 Templates  : Brine ( Aria, Blend, Burke, Cacao, Clay, Fairfield, Feed,
                    Foster, Greenwich, Hatch, Heights, Hunter, Hyde, Impact,
                    Jaunt, Juke, Keene, Kin, Lincoln, Maple, Margot, Marta,
                    Mentor, Mercer, Miller, Mojave, Moksha, Motto, Nueva, Pedro,
                    Pursuit, Rally, Rover, Royce, Sofia, Sonora, Stella, Thorne,
                    Vow, Wav, West )
                    
                    your template is not listed? then it is not currently
                    supported
  
  Dependencies    : twcsl < https://tinyurl.com/27bpnu6f >
  
  Note            : this code has a cache for storing elements of the social
                    links block on the twc-cbsle page. the cache is not used
                    when in squarespace preview. the use of a cache means it is
                    possible that the information will become stale. this
                    effects the design of the social links, not links
                    themselves. the design will update when the browser session
                    is restared
  
  By              : Thomas Creedon < http://www.tomsWeb.consulting/ >
  
  no user serviceable parts below
  
  -->
  
  <style>
  
    body:not( .sqs-edit-mode ) x-twc-cbsle,
    
    /* 7.1 */
    
    .sqs-block-socialaccountlinks-v2 .sqs-svg-icon--wrapper[ href*="twc-cbsle" ],
    .sqs-block-socialaccountlinks-v2 .sqs-svg-icon--wrapper[ href="mailto:89222753@cbsle.twc" ],
    .sqs-block-socialaccountlinks-v2 .sqs-svg-icon--wrapper[ href="tel:89222753" ],
    .header-actions-action--social .icon[ href*="twc-cbsle" ],
    .header-actions-action--social .icon[ href="mailto:89222753@cbsle.twc" ],
    .header-actions-action--social .icon[ href="tel:89222753" ],
    
    /* 7.0 Brine */
    
    .social-account-links-v2-block .sqs-svg-icon--wrapper[ href*="twc-cbsle" ],
    .social-account-links-v2-block .sqs-svg-icon--wrapper[ href="mailto:89222753@cbsle.twc" ],
    .social-account-links-v2-block .sqs-svg-icon--wrapper[ href="tel:89222753" ],
    .SocialLinks-link[ href*="twc-cbsle" ],
    .SocialLinks-link[ href="mailto:89222753@cbsle.twc" ],
    .SocialLinks-link[ href="tel:89222753" ]
    
      {
      
        display : none;
        
        }
        
    </style>
    
  <script>
  
    $( ( ) => {
    
      const
      
        version = '0.3.0',
        
        s = `
        
          Code Block Social Links External v${ version }
        
          License < https://tinyurl.com/s872fb68 >
          
          Â© 2024 Thomas Creedon
          
          Tom's Web Consulting < http://www.tomsWeb.consulting >
          
          `
          
          .replace ( /^\s+/gm, '' );
          
      console.log ( s );
      
      const initialize = ( ) => {
      
        const
        
          codeKey = 'twc-cbsle',
          
          setTemplates = ( ) => {
          
            const callback = ( data ) => {
            
              let selector = '.sqs-block-socialaccountlinks-v2';
              
              $blockTemplate = $( selector, data )
              
                .first ( )
              
                .removeAttr ( 'id' );
                
              selector = 'style';
              
              $style = $( selector, $blockTemplate );
              
              const css = $style
              
                .text ( )
                
                .replace ( /#block-[^ ]+ /, '' );
                
              $style.text ( css );
              
              selector = '.sqs-svg-icon--wrapper:first-child';
              
              $listItemTemplate = $( selector, $blockTemplate )
              
                .attr ( 'href', '' )
                
                .removeAttr ( 'aria-label' )
                
                .removeAttr ( 'class' )
                
                .addClass ( 'sqs-svg-icon--wrapper' )
                
                .find ( '[*|href]' )
                
                .attr ( 'xlink:href', '' )
                
                .end ( );
                
              $blockTemplate
              
                .find ( '.sqs-svg-icon--list' )
                
                .empty ( );
                
              let templates = {
              
                block : $blockTemplate.prop ( 'outerHTML' ),
                
                listItem : $listItemTemplate.prop ( 'outerHTML' )
                
                };
                
              templates = JSON.stringify ( templates );
              
              sessionStorage.setItem ( codeKey, templates );
              
              build ( );
              
              };
              
            $.get ( `/${ codeKey }`, callback );
            
            };
            
        let
        
          selector = `x-${ codeKey }`,
          
          $blockTemplate,
          
          $listItemTemplate;
          
        const $elements = $( selector );
        
        if ( ! $elements.length ) return; // bail if no elements
        
        const build = ( ) => {
        
          const callback = function ( i ) {
          
            const
            
              $this = $( this ),
              
              blockId = `${ codeKey }-${ i }`,
              
              callback = ( link, i ) => {
              
                const $listItem = $listItemTemplate
                
                  .clone ( )
                  
                  .attr ( 'href', link )
                  
                let
                
                  map = {
                  
                    discord : {
                    
                      ariaLabel : 'Discord',
                      
                      classXlinkHref : 'discord-unauth'
                      
                      },
                    
                    facebook : {
                    
                      ariaLabel : 'Facebook',
                      
                      classXlinkHref : 'facebook-unauth'
                      
                      },
                      
                    instagram : {
                    
                      ariaLabel : 'Instagram',
                      
                      classXlinkHref : 'instagram-unauth'
                      
                      },
                      
                    linkedin : {
                    
                      ariaLabel : 'LinkedIn',
                      
                      classXlinkHref : 'linkedin-unauth'
                      
                      },
                      
                    pinterest : {
                    
                      ariaLabel : 'Pinterest',
                      
                      classXlinkHref : 'pinterest-unauth'
                      
                      },
                      
                    reddit : {
                    
                      ariaLabel : 'Reddit',
                      
                      classXlinkHref : 'reddit'
                      
                      },
                      
                    // snapchat : 'snapchat',
                    
                    spotify : {
                    
                      ariaLabel : 'Spotify',
                      
                      classXlinkHref : 'spotify-unauth'
                      
                      },
                      
                    threads : {
                    
                      ariaLabel : 'Threads',
                      
                      classXlinkHref : 'threads-unauth'
                      
                      },
                      
                    tiktok : {
                    
                      ariaLabel : 'TikTok',
                      
                      classXlinkHref : 'tiktok-unauth'
                      
                      },
                      
                    tumblr : {
                    
                      ariaLabel : 'Tumblr',
                      
                      classXlinkHref : 'tumblr-unauth'
                      
                      },
                      
                    twitch : {
                    
                      ariaLabel : 'Twitch',
                      
                      classXlinkHref : 'twitch'
                      
                      },
                      
                    twitter : {
                    
                      ariaLabel : 'Twitter',
                      
                      classXlinkHref : 'twitter-unauth'
                      
                      },
                      
                    vevo : {
                    
                      ariaLabel : 'Vevo',
                      
                      classXlinkHref : 'vevo'
                      
                      },
                      
                    x : {
                    
                      ariaLabel : 'X',
                      
                      classXlinkHref : 'x-formerly-twitter-unauth'
                      
                      },
                      
                    youtube : {
                    
                      ariaLabel : 'YouTube',
                      
                      classXlinkHref : 'youtube-unauth'
                      
                      },
                      
                    default : {
                    
                      ariaLabel : 'URL',
                      
                      classXlinkHref : 'url'
                      
                      }
                      
                    },
                    
                  service = /http[s]?:\/\/(?:.*\.)?(?:(facebook|instagram|linkedin|pinterest|tiktok|tumblr|twitter|youtube|x|default)\.com\/|(reddit)\.com\/user\/|open\.(spotify)\.com\/artist\/|(vevo)\.com\/profiles\/|(discord)\.gg\/|(threads)\.net\/|(twitch)\.tv\/)/; // (snapchat)\.com\/add|
                  
                service = link.match ( service );
                
                if ( service === null )
                
                  service = 'default';
                  
                  else
                  
                    service = service
                    
                      .slice ( 1 )
                      
                      .join ( '' );
                      
                const
                
                  ariaLabel = map [
                  
                    service
                    
                    ]
                    
                    .ariaLabel,
                    
                  classXlinkHref = map [
                  
                    service
                    
                    ]
                    
                    .classXlinkHref;
                    
                $listItem
                
                  .addClass ( classXlinkHref )
                  
                  .attr ( 'aria-label', ariaLabel )
                  
                  .find ( '.sqs-use--icon' )
                  
                  .attr ( 'xlink:href', `#${ classXlinkHref }-icon` )
                  
                  .end ( )
                  
                  .find ( '.sqs-use--mask' )
                  
                  .attr ( 'xlink:href', `#${ classXlinkHref }-mask` );
                  
                let selector = '.sqs-svg-icon--list';
                
                $( selector, $block )
                
                  .append ( $listItem );
                  
                },
                
              $block = $blockTemplate
              
                .clone ( )
                
                .attr ( 'id', blockId );
                
            let selector = 'style';
            
            $style = $( selector, $block );
            
            const css = $style
            
              .text ( )
              
              .replace ( '.', `#${ blockId } .` );
              
            $style.text ( css );
            
            const links = $( this )
            
              .text ( )
              
              .split ( '\n' )
              
              .map ( l => l.trim ( ) )
              
              .filter ( l => l != '' )
              
              .forEach ( callback );
              
            $this
            
              .parents ( '.sqs-block-code' )
              
              .replaceWith ( $block );
              
            }
          
          $elements.each ( callback );
          
          }
          
        let templates = sessionStorage
        
          .getItem ( codeKey );
          
        const b = window.frameElement !== null || templates === null;
        
        if ( b )
        
          setTemplates ( );
          
          else {
          
            templates = JSON.parse ( templates );
            
            $blockTemplate = $( templates.block );
            
            $listItemTemplate = $( templates.listItem );
            
            build ( );
            
            }
            
        };
        
      switch ( true ) {
      
        case twcsl.ss.is71 :
        
          $( initialize );
          
          break;
          
        case twcsl.ss.is70 :
        
          Squarespace.onInitialize ( Y, initialize );
          
          break;
          
        }
        
       } );
      
    </script>
    
  <!-- end code block social links external -->
