<!-- begin TWC Store Page Product Add to Cart Button URL Redirect After Added to Cart -->

  <script>
  
    ( ( ) => {
    
      /*
      
        store page product add to cart button url redirect after added to cart
        
        License      : < https://tinyurl.com/s872fb68 >
        
        Version      : 0.3.0
        
        SS Versions  : 7.1, 7.0
        
        v7.1
        Products V2
        Compatible   : Yes
        
        v7.1
        Fluid
        Engine
        Compatible   : Not Applicable
        
        Copyright    : 2021-2025 Thomas Creedon
                       
                       Tom's Web Consulting < http://www.tomsWeb.consulting/ >
        
        no user serviceable parts below
        
       */
        
      const
      
        title =
        
          'Store Page Add to Cart Button Redirect to URL After Product Added',
          
        version = '0.3.0',
        
        s = `${ title } v${ version }
        
          License < https://tinyurl.com/s872fb68 >
          
          Â© 2021-2025 Thomas Creedon
          
          Tom's Web Consulting < http://www.tomsWeb.consulting >`
          
          .replace ( /^\s+/gm, '' );
          
      console.log ( s );
      
      // bail if no mutation observer available
      
      if ( ! ( 'MutationObserver' in window ) ) return;
      
      const callback = ( ) => {
      
        const isStorePage = Static
        
          .SQUARESPACE_CONTEXT
          
          .collection
          
          ?.type
          
          ===
          
          13;
          
        if ( ! isStorePage ) return; // bail if not store page
        
        const codeKey = 'twc-spatcbrtuapa';
        
        let selector = 'script[ type="application/vnd.' +
        
          `${ codeKey.replace ( '-', '.' ) }" ]`;
          
        const scriptElement = [
        
          ...
          
          document
          
            .querySelectorAll ( selector )
            
          ]
          
          .slice ( -1 )
          
          [ 0 ];
          
        if ( ! scriptElement ) return; // bail if no element
        
        // initialize twc module
        
        window.twc = ( ( self ) => self ) ( window.twc || { } );
        
        // initialize twc spatcbrtuapa sub-module
        
        twc.spatcbrtuapa = ( ( self ) => self ) ( twc.spatcbrtuapa || { } );
        
        selector = '.sqs-add-to-cart-button';
        
        const
        
          callback = ( mutations ) => {
          
            const callback = ( mutation ) => {
            
              const hasAttribute = mutation
              
                .attributeName === 'class';
                
              if ( ! hasAttribute ) return; // continue
              
              const
              
                element = mutation.target,
                
                hasClass = element
                
                  .classList
                  
                  .contains ( 'cart-added' );
                  
              if ( ! hasClass ) return; // continue
              
              location = options.url;
              
              };
              
            mutations.forEach ( callback );
            
            },
            
          config = {
          
            attributes : true
            
            },
                   
          elements = document
          
            .querySelectorAll ( selector ),
            
          isDetail = ( ( ) => {
          
            const selector = 'body[ id^="item-" ]';
            
            const is = document
            
              .querySelector ( selector )
              
              !==
              
              null;
              
            return is;
            
            } ) ( ),
            
          observer = new MutationObserver ( callback ),
          
          options = codeKey
          
            .split ( '-' )
            
            .reduce ( ( obj, key ) => obj?.[ key ], window );
            
        Object
        
          .assign (
          
            options,
            
            JSON
            
              .parse (
              
                scriptElement
                
                  .textContent
                  
                  .replace ( /^\s*\/\/.*/gm, '' ) // remove // comments
                  
                  .replaceAll ( '\n', '' )
                  
                )
                
            );
            
        elements
        
          .forEach ( e => observer.observe ( e, config ) );
          
        // detail add to cart button auto click 
        
        {
        
          const isAutoClick
          
            =
            
            isDetail
            
            &&
            
            options
            
              .detailAutoClick;
              
          if ( ! isAutoClick ) return; // bail if no auto click
          
          elements
          
            [ 0 ]
            
            ?.click ( );
            
          }
          
        };
        
      window
      
        .addEventListener ( 'load', callback );
        
      } ) ( );
      
    </script>
    
  <!-- end TWC Store Page Product Add to Cart Button URL Redirect After Added to Cart -->
