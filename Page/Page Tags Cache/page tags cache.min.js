(()=>{
/*!
  
    page tags cache
    
    License       : < https://tinyurl.com/s872fb68 >
    
    Version       : 0.3.1
    
    SS Versions   : 7.1, 7.0
    
    v7.1
    Products V2
    Compatible    : Not Applicable
    
    v7.1
    Fluid
    Engine
    Compatible    : Not Applicable
    
    Notes         : the code makes a call to an unofficial Squarespace
                    GetCollectionTags API for information that is not
                    normally available through other means
                    
                    the cache disable option doesn't disable the overall
                    cache logic. it simply removes the session storage key
                    after user callbacks are run. this causes the cache data
                    to be regenerated when the Store page is reloaded
                    
                    this can be useful for testing or if you want site
                    visitors to always have access to the current tags
    
    Copyright     : 2025 Thomas Creedon
                    
                    Tom's Web Consulting < http://www.tomsWeb.consulting/ >
    
    no user serviceable parts below
    
    */
const e="0.3.1",t=`\n    \n      Page Tags Cache v${e}\n      \n      License < https://tinyurl.com/s872fb68 >\n      \n      Â© 2025 Thomas Creedon\n      \n      Tom's Web Consulting < http://www.tomsWeb.consulting >\n      \n      `.replace(/^\s+/gm,"");console.log(t);const o=!!document.querySelectorAll(['body[ class*="collection-type-blog-" ]','body[ class~="collection-type-blog" ]'].join(", ")).length,c=!!document.querySelectorAll(['body[ class*="collection-type-events-" ]','body[ class~="collection-type-events" ]'].join(", ")).length,n=13===Static.SQUARESPACE_CONTEXT.collection?.type,l=o||c||n;if(!l)return;window.twc=window.twc||{},twc.ptc=twc.ptc||{},twc.ptc.callbacks=twc.ptc.callbacks||[];const s="twc-ptc",a=async()=>{const e=r.callbacks.length;if(!e){const e=`${s} no callbacks`;return void console.warn(e)}let t=sessionStorage.getItem(s);if(t)return t=JSON.parse(t),w(t),void(r.cacheDisable&&sessionStorage.removeItem(s));const o="/api/commondata/GetCollectionTags?collectionId="+Static.SQUARESPACE_CONTEXT.collection.id;try{const e=await fetch(o);if(!e.ok){const t=`\n          \n            ${s} network response was not ok ${e.statusText}\n              \n            `.trim().replace(/\s+/gm," ");throw new Error(t)}t=await e.json()}catch(e){const t=`\n          \n            ${s} there has been a problem with your fetch get\n            \n            operation, ${e}.\n            \n            `.trim().replace(/\s+/gm," ");console.error(t)}finally{const e=e=>{e.className=i(e.name),e.queryValue=p(e.name)};t.forEach(e),sessionStorage.setItem(s,JSON.stringify(t)),w(t),r.cacheDisable&&sessionStorage.removeItem(s)}},r=s.split("-").reduce((e,t)=>e?.[t],window),i=e=>{const t="tag-"+e.replaceAll(" ","-").toLowerCase().replace(/[^\w-]+/g,"").replaceAll("--","-");return t},p=e=>{const t=e.replaceAll(" ","-").replace(/[^\w-]+/g,"").replaceAll("--","-");return t},w=e=>{const t=t=>{try{t(e)}catch(e){const t=`${s} callback error`;console.error(t,e)}};r.callbacks.forEach(t)};document.addEventListener("DOMContentLoaded",a)})();
